<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no" />
    <meta name="description" content="KarmYog Find Jobs - Discover service opportunities in your area" />
    <meta name="author" content="KarmYog Team" />
    <title>Find Jobs - KarmYog</title>
    
    <script src="https://code.jquery.com/jquery-3.7.1.min.js" integrity="sha256-/JqT3SQfawRcv/BIHPThkBvs0OEvtFFmqPF/lYI/Cxo=" crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js" integrity="sha384-C6RzsynM9kWDrMNeT87bh95OGNyZPhcTNXj1NW7RuBCsyN/o0jlpcV8Qyq46cDfL" crossorigin="anonymous"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/angular.js/1.8.3/angular.min.js"></script>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-T3c6CoIi6uLrA9TneNEoa7RxnatzjcDSCmG1MXxSR1GAsXEV/Dwwykc2MPK8M2HN" crossorigin="anonymous" />
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css" />
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800;900&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="/public/css/reset.css">
    <link rel="stylesheet" href="/css/modern-design-system.css">
    <link rel="stylesheet" href="/css/modern-navbar.css">
    <link rel="stylesheet" href="/public/css/responsive.css">

    <style>
      /* Find Jobs Page Specific Styles */
      .find-jobs-page {
        min-height: 100vh;
        background: linear-gradient(135deg, #fafafa 0%, #f0f9ff 100%);
        font-family: 'Inter', -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
      }

      .page-hero {
        background: linear-gradient(135deg, #0284c7 0%, #075985 100%);
        color: white;
        padding: 4rem 0 3rem;
        position: relative;
        overflow: hidden;
      }

      .page-hero::before {
        content: '';
        position: absolute;
        top: 0;
        left: 0;
        right: 0;
        bottom: 0;
        background: url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 1000 1000"><defs><radialGradient id="a" cx="50%" cy="50%"><stop offset="0%" style="stop-color:rgba(255,255,255,0.1)"/><stop offset="100%" style="stop-color:rgba(255,255,255,0)"/></radialGradient></defs><circle cx="200" cy="200" r="200" fill="url(%23a)"/><circle cx="800" cy="800" r="300" fill="url(%23a)"/></svg>');
        pointer-events: none;
      }

      .hero-content {
        text-align: center;
        position: relative;
        z-index: 1;
      }

      .hero-title {
        font-size: 2.25rem;
        font-weight: 800;
        margin-bottom: 1rem;
        background: linear-gradient(45deg, #ffffff, #e2e8f0);
        -webkit-background-clip: text;
        -webkit-text-fill-color: transparent;
        background-clip: text;
      }

      .hero-subtitle {
        font-size: 1.125rem;
        opacity: 0.9;
        margin-bottom: 2rem;
        max-width: 600px;
        margin-left: auto;
        margin-right: auto;
      }

      .search-section {
        background: white;
        border-radius: 1rem;
        box-shadow: 0 10px 25px rgba(0, 0, 0, 0.1);
        padding: 2rem;
        margin: -2rem auto 3rem;
        max-width: 800px;
        position: relative;
        z-index: 2;
      }

      .filter-group {
        display: flex;
        gap: 1rem;
        margin-bottom: 1rem;
        flex-wrap: wrap;
      }

      .filter-input {
        flex: 1;
        min-width: 200px;
        padding: 0.75rem 1rem;
        border: 2px solid #e5e5e5;
        border-radius: 0.75rem;
        font-size: 1rem;
        transition: all 0.3s ease;
        background: #fafafa;
      }

      .filter-input:focus {
        outline: none;
        border-color: #0ea5e9;
        box-shadow: 0 0 0 3px rgba(14, 165, 233, 0.1);
        background: white;
      }

      .filter-select {
        padding: 0.75rem 1rem;
        border: 2px solid #e5e5e5;
        border-radius: 0.75rem;
        font-size: 1rem;
        background: #fafafa;
        transition: all 0.3s ease;
        min-width: 150px;
        cursor: pointer;
      }

      .filter-select:focus {
        outline: none;
        border-color: #0ea5e9;
        box-shadow: 0 0 0 3px rgba(14, 165, 233, 0.1);
        background: white;
      }

      .jobs-container {
        max-width: 1200px;
        margin: 0 auto;
        padding: 0 1rem;
      }

      .jobs-header {
        display: flex;
        justify-content: space-between;
        align-items: center;
        margin-bottom: 2rem;
        flex-wrap: wrap;
        gap: 1rem;
      }

      .jobs-count {
        font-size: 1.125rem;
        font-weight: 600;
        color: #404040;
      }

      .view-toggle {
        display: flex;
        background: #f5f5f5;
        border-radius: 0.75rem;
        padding: 0.25rem;
      }

      .view-btn {
        padding: 0.5rem 1rem;
        border: none;
        background: transparent;
        border-radius: 0.5rem;
        font-size: 0.875rem;
        font-weight: 500;
        color: #525252;
        cursor: pointer;
        transition: all 0.3s ease;
      }

      .view-btn.active {
        background: white;
        color: #0284c7;
        box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
      }

      .jobs-grid {
        display: grid;
        grid-template-columns: repeat(auto-fill, minmax(350px, 1fr));
        gap: 1.5rem;
        margin-bottom: 3rem;
      }

      .job-card {
        background: white;
        border-radius: 1rem;
        box-shadow: 0 4px 6px rgba(0, 0, 0, 0.05);
        transition: all 0.3s ease;
        border: 1px solid #e5e5e5;
        overflow: hidden;
        position: relative;
      }

      .job-card:hover {
        transform: translateY(-4px);
        box-shadow: 0 20px 25px rgba(0, 0, 0, 0.1);
        border-color: #bae6fd;
      }

      .job-card-header {
        padding: 1.5rem 1.5rem 1rem;
        border-bottom: 1px solid #f5f5f5;
      }

      .job-title {
        font-size: 1.125rem;
        font-weight: 700;
        color: #262626;
        margin-bottom: 0.5rem;
        display: flex;
        align-items: center;
        gap: 0.5rem;
      }

      .job-subtitle {
        color: #525252;
        font-size: 0.875rem;
        margin-bottom: 0.75rem;
      }

      .job-badges {
        display: flex;
        gap: 0.5rem;
        flex-wrap: wrap;
      }

      .job-badge {
        display: inline-flex;
        align-items: center;
        padding: 0.25rem 0.75rem;
        background: #e0f2fe;
        color: #0369a1;
        font-size: 0.75rem;
        font-weight: 500;
        border-radius: 1rem;
      }

      .job-badge.secondary {
        background: #f5f5f5;
        color: #404040;
      }

      .job-card-body {
        padding: 1rem 1.5rem;
      }

      .job-detail {
        display: flex;
        align-items: center;
        gap: 0.75rem;
        margin-bottom: 0.75rem;
        color: #525252;
        font-size: 0.875rem;
      }

      .job-detail i {
        width: 16px;
        color: #0ea5e9;
      }

      .job-task {
        background: #fafafa;
        padding: 1rem;
        border-radius: 0.75rem;
        margin-top: 1rem;
        border-left: 4px solid #0ea5e9;
      }

      .job-task-label {
        font-size: 0.75rem;
        font-weight: 600;
        color: #525252;
        text-transform: uppercase;
        letter-spacing: 0.05em;
        margin-bottom: 0.25rem;
      }

      .job-task-content {
        color: #262626;
        line-height: 1.5;
      }

      .job-card-footer {
        padding: 1rem 1.5rem;
        background: #fafafa;
        display: flex;
        justify-content: space-between;
        align-items: center;
        gap: 1rem;
      }

      .job-date {
        font-size: 0.75rem;
        color: #737373;
        flex: 1;
      }

      .apply-btn {
        background: linear-gradient(135deg, #0ea5e9, #0284c7);
        color: white;
        border: none;
        padding: 0.75rem 1.5rem;
        border-radius: 0.75rem;
        font-weight: 600;
        font-size: 0.875rem;
        cursor: pointer;
        transition: all 0.3s ease;
        display: flex;
        align-items: center;
        gap: 0.5rem;
        white-space: nowrap;
      }

      .apply-btn:hover {
        transform: translateY(-1px);
        box-shadow: 0 8px 15px rgba(14, 165, 233, 0.3);
      }

      .loading-state {
        text-align: center;
        padding: 4rem 2rem;
      }

      .loading-spinner {
        width: 50px;
        height: 50px;
        border: 4px solid #e5e5e5;
        border-top: 4px solid #0ea5e9;
        border-radius: 50%;
        animation: spin 1s linear infinite;
        margin: 0 auto 1rem;
      }

      @keyframes spin {
        0% { transform: rotate(0deg); }
        100% { transform: rotate(360deg); }
      }

      .empty-state {
        text-align: center;
        padding: 4rem 2rem;
      }

      .empty-state-icon {
        font-size: 4rem;
        color: #d4d4d4;
        margin-bottom: 1rem;
      }

      .empty-state-title {
        font-size: 1.25rem;
        font-weight: 600;
        color: #404040;
        margin-bottom: 0.5rem;
      }

      .empty-state-text {
        color: #737373;
        max-width: 400px;
        margin: 0 auto;
      }

      /* Modern Footer */
      .modern-footer {
        background: linear-gradient(135deg, #262626 0%, #171717 100%);
        color: #d4d4d4;
        padding: 3rem 0 2rem;
        margin-top: 4rem;
      }

      .footer-content {
        max-width: 1200px;
        margin: 0 auto;
        padding: 0 1rem;
      }

      .footer-grid {
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
        gap: 2rem;
        margin-bottom: 2rem;
      }

      .footer-section h3 {
        color: white;
        font-weight: 600;
        margin-bottom: 1rem;
        font-size: 1.125rem;
      }

      .footer-section ul {
        list-style: none;
        padding: 0;
        margin: 0;
      }

      .footer-section ul li {
        margin-bottom: 0.5rem;
      }

      .footer-section ul li a {
        color: #a3a3a3;
        text-decoration: none;
        transition: color 0.3s ease;
      }

      .footer-section ul li a:hover {
        color: #38bdf8;
      }

      .social-links {
        display: flex;
        gap: 1rem;
        margin-top: 1rem;
      }

      .social-link {
        display: flex;
        align-items: center;
        justify-content: center;
        width: 40px;
        height: 40px;
        background: #404040;
        border-radius: 50%;
        color: #d4d4d4;
        text-decoration: none;
        transition: all 0.3s ease;
      }

      .social-link:hover {
        background: #0ea5e9;
        color: white;
        transform: translateY(-2px);
      }

      .footer-bottom {
        border-top: 1px solid #404040;
        padding-top: 2rem;
        text-align: center;
        color: #737373;
        font-size: 0.875rem;
      }

      /* Responsive Design */
      @media (max-width: 768px) {
        .hero-title {
          font-size: 1.875rem;
        }
        
        .search-section {
          margin: -1rem 1rem 2rem;
          padding: 1.5rem;
        }
        
        .filter-group {
          flex-direction: column;
        }
        
        .filter-input, .filter-select {
          min-width: 100%;
        }
        
        .jobs-grid {
          grid-template-columns: 1fr;
          gap: 1rem;
        }
        
        .jobs-header {
          flex-direction: column;
          align-items: stretch;
        }
        
        .job-card-footer {
          flex-direction: column;
          align-items: stretch;
          gap: 0.75rem;
        }
        
        .apply-btn {
          justify-content: center;
        }
        
        .navbar-brand {
          margin-left: 1rem !important;
        }
        
        .navbar-nav {
          margin-right: 1rem !important;
        }
      }

      @media (max-width: 480px) {
        .page-hero {
          padding: 2rem 0 1.5rem;
        }
        
        .search-section {
          padding: 1rem;
          margin: -1rem 0.5rem 1.5rem;
        }
        
        .job-card-header,
        .job-card-body,
        .job-card-footer {
          padding: 1rem;
        }
        
        .hero-title {
          font-size: 1.5rem;
        }
        
        .hero-subtitle {
          font-size: 1rem;
        }
        
        .jobs-container {
          padding: 0 0.5rem;
        }
      }

      /* Animation fixes for better performance */
      @media (prefers-reduced-motion: reduce) {
        * {
          animation-duration: 0.01ms !important;
          animation-iteration-count: 1 !important;
          transition-duration: 0.01ms !important;
        }
      }

      /* Print styles */
      @media print {
        .page-hero,
        .search-section,
        .modern-footer,
        .apply-btn {
          display: none;
        }
        
        .job-card {
          break-inside: avoid;
          box-shadow: none;
          border: 1px solid #000;
        }
      }
    </style>
    <script>
      var module = angular.module("myModule", []);
      var controller = module.controller(
        "myController",
        function ($scope, $http) {
          $scope.jsonRecordsAry = [];
          $scope.filteredJobs = [];
          $scope.loading = true;
          $scope.searchText = '';
          $scope.selectedState = '';
          $scope.selectedCity = '';
          $scope.selectedService = '';
          $scope.selectedSubService = '';
          $scope.viewMode = 'grid';
          
          // Get unique values for filters
          $scope.getUniqueStates = function() {
            if (!$scope.jsonRecordsAry || $scope.jsonRecordsAry.length === 0) return [];
            return [...new Set($scope.jsonRecordsAry.map(job => job.state).filter(Boolean))].sort();
          };
          
          $scope.getUniqueCities = function() {
            if (!$scope.jsonRecordsAry || $scope.jsonRecordsAry.length === 0) return [];
            if ($scope.selectedState) {
              return [...new Set($scope.jsonRecordsAry.filter(job => job.state === $scope.selectedState).map(job => job.city).filter(Boolean))].sort();
            }
            return [...new Set($scope.jsonRecordsAry.map(job => job.city).filter(Boolean))].sort();
          };
          
          $scope.getUniqueServices = function() {
            if (!$scope.jsonRecordsAry || $scope.jsonRecordsAry.length === 0) return [];
            return [...new Set($scope.jsonRecordsAry.map(job => job.serviceCat).filter(Boolean))].sort();
          };
          
          $scope.getUniqueSubServices = function() {
            if (!$scope.jsonRecordsAry || $scope.jsonRecordsAry.length === 0) return [];
            if ($scope.selectedService) {
              return [...new Set($scope.jsonRecordsAry.filter(job => job.serviceCat === $scope.selectedService).map(job => job.subServiceCat).filter(Boolean))].sort();
            }
            return [...new Set($scope.jsonRecordsAry.map(job => job.subServiceCat).filter(Boolean))].sort();
          };
          
          // Filter jobs based on search criteria
          $scope.filterJobs = function() {
            if (!$scope.jsonRecordsAry || $scope.jsonRecordsAry.length === 0) {
              $scope.filteredJobs = [];
              return;
            }
            
            $scope.filteredJobs = $scope.jsonRecordsAry.filter(function(job) {
              let matchesSearch = true;
              let matchesState = true;
              let matchesCity = true;
              let matchesService = true;
              let matchesSubService = true;
              
              if ($scope.searchText && $scope.searchText.trim()) {
                const searchLower = $scope.searchText.toLowerCase().trim();
                matchesSearch = (
                  (job.emailid && job.emailid.toLowerCase().includes(searchLower)) ||
                  (job.serviceCat && job.serviceCat.toLowerCase().includes(searchLower)) ||
                  (job.subServiceCat && job.subServiceCat.toLowerCase().includes(searchLower)) ||
                  (job.city && job.city.toLowerCase().includes(searchLower)) ||
                  (job.state && job.state.toLowerCase().includes(searchLower)) ||
                  (job.task && job.task.toLowerCase().includes(searchLower)) ||
                  (job.address && job.address.toLowerCase().includes(searchLower))
                );
              }
              
              if ($scope.selectedState && $scope.selectedState.trim()) {
                matchesState = job.state === $scope.selectedState;
              }
              
              if ($scope.selectedCity && $scope.selectedCity.trim()) {
                matchesCity = job.city === $scope.selectedCity;
              }
              
              if ($scope.selectedService && $scope.selectedService.trim()) {
                matchesService = job.serviceCat === $scope.selectedService;
              }
              
              if ($scope.selectedSubService && $scope.selectedSubService.trim()) {
                matchesSubService = job.subServiceCat === $scope.selectedSubService;
              }
              
              return matchesSearch && matchesState && matchesCity && matchesService && matchesSubService;
            });
          };
          
          // Clear all filters
          $scope.clearFilters = function() {
            $scope.searchText = '';
            $scope.selectedState = '';
            $scope.selectedCity = '';
            $scope.selectedService = '';
            $scope.selectedSubService = '';
            $scope.filterJobs();
          };
          
          // Toggle view mode
          $scope.setViewMode = function(mode) {
            $scope.viewMode = mode;
          };
          
          // Format date
          $scope.formatDate = function(dateString) {
            if (!dateString) return 'Recently posted';
            const date = new Date(dateString);
            const now = new Date();
            const diffTime = Math.abs(now - date);
            const diffDays = Math.ceil(diffTime / (1000 * 60 * 60 * 24));
            
            if (diffDays === 1) return '1 day ago';
            if (diffDays < 7) return `${diffDays} days ago`;
            if (diffDays < 30) return `${Math.ceil(diffDays / 7)} weeks ago`;
            return date.toLocaleDateString();
          };
          
          // Get service icon
          $scope.getServiceIcon = function(service) {
            const icons = {
              'Electrical': 'fas fa-bolt',
              'Plumbing': 'fas fa-wrench',
              'Cleaning': 'fas fa-broom',
              'Gardening': 'fas fa-seedling',
              'Cooking': 'fas fa-utensils',
              'Tutoring': 'fas fa-book',
              'Repair': 'fas fa-tools',
              'Transportation': 'fas fa-car',
              'Delivery': 'fas fa-truck',
              'Security': 'fas fa-shield-alt',
              'Beauty': 'fas fa-cut',
              'Health': 'fas fa-heartbeat',
              'Fitness': 'fas fa-dumbbell',
              'Pet Care': 'fas fa-paw',
              'Moving': 'fas fa-boxes',
              'Painting': 'fas fa-paint-brush',
              'Technology': 'fas fa-laptop',
              'Photography': 'fas fa-camera',
              'Music': 'fas fa-music',
              'Event': 'fas fa-calendar-alt'
            };
            
            for (let key in icons) {
              if (service && service.toLowerCase().includes(key.toLowerCase())) {
                return icons[key];
              }
            }
            return 'fas fa-briefcase';
          };
          
          // Contact job poster
          $scope.contactPoster = function(job) {
            if (job.emailid) {
              window.location.href = `mailto:${job.emailid}?subject=Interest in ${job.serviceCat} Service&body=Hi,\n\nI'm interested in the ${job.serviceCat} service you posted on KarmYog.\n\nService Details:\n- Type: ${job.serviceCat}\n- Sub-service: ${job.subServiceCat}\n- Location: ${job.city}, ${job.state}\n\nPlease let me know more details.\n\nBest regards`;
            }
          };

          //   ----------Fetch-all-------------------------------
          $scope.doFetchAlljobs = function () {
            $scope.loading = true;
            $scope.jsonRecordsAry = [];
            $scope.filteredJobs = [];
            
            let url = "/angular-fetch-alljobs";
            $http.get(url).then(success, errors);
            
            function success(response) {
              console.log("Jobs data received:", response.data);
              $scope.jsonRecordsAry = response.data || [];
              $scope.filteredJobs = response.data || [];
              $scope.loading = false;
              
              // Trigger a digest cycle to update the UI
              if (!$scope.$$phase) {
                $scope.$apply();
              }
            }
            
            function errors(response) {
              console.error("Error fetching jobs:", response);
              alert("Error fetching jobs: " + (response.data || response.statusText || "Unknown error"));
              $scope.jsonRecordsAry = [];
              $scope.filteredJobs = [];
              $scope.loading = false;
              
              // Trigger a digest cycle to update the UI
              if (!$scope.$$phase) {
                $scope.$apply();
              }
            }
          };

          // Watch for filter changes
          $scope.$watch('searchText', $scope.filterJobs);
          $scope.$watch('selectedState', function() {
            $scope.selectedCity = ''; // Reset city when state changes
            $scope.filterJobs();
          });
          $scope.$watch('selectedCity', $scope.filterJobs);
          $scope.$watch('selectedService', function() {
            $scope.selectedSubService = ''; // Reset sub-service when service changes
            $scope.filterJobs();
          });
          $scope.$watch('selectedSubService', $scope.filterJobs);
        }
      );
    </script>
  </head>
  <body ng-app="myModule" ng-controller="myController" ng-init="doFetchAlljobs();" class="find-jobs-page">
    <!-- Modern Navigation -->
    <nav class="navbar navbar-expand-lg" style="background: rgba(255, 255, 255, 0.95); backdrop-filter: blur(10px); box-shadow: 0 2px 20px rgba(0, 0, 0, 0.1); position: sticky; top: 0; z-index: 1000;">
      <div class="container-fluid">
        <a href="/spd" style="text-decoration: none">
          <h5 class="navbar-brand" style="margin-left: 50px; color: #0284c7; font-weight: 700; margin-bottom: 0;">
            <i class="fas fa-briefcase me-2"></i>KarmYog.com
          </h5>
        </a>
        <div class="navbar-nav ms-auto me-5">
          <a href="/spd" class="nav-link" style="color: #525252; font-weight: 500; text-decoration: none;">
            <i class="fas fa-home me-1"></i>Dashboard
          </a>
        </div>
      </div>
    </nav>

    <!-- Hero Section -->
    <section class="page-hero">
      <div class="container">
        <div class="hero-content">
          <h1 class="hero-title">Find Your Next Opportunity</h1>
          <p class="hero-subtitle">
            Discover service jobs in your area and connect with customers who need your expertise. 
            Browse through available opportunities and start earning today.
          </p>
        </div>
      </div>
    </section>

    <!-- Search and Filter Section -->
    <div class="container">
      <div class="search-section">
        <div class="filter-group">
          <input 
            type="text" 
            class="filter-input" 
            placeholder="Search jobs, services, locations..." 
            ng-model="searchText">
          <select class="filter-select" ng-model="selectedState">
            <option value="">All States</option>
            <option ng-repeat="state in getUniqueStates()" value="{{state}}">{{state}}</option>
          </select>
          <select class="filter-select" ng-model="selectedCity">
            <option value="">All Cities</option>
            <option ng-repeat="city in getUniqueCities()" value="{{city}}">{{city}}</option>
          </select>
        </div>
        <div class="filter-group">
          <select class="filter-select" ng-model="selectedService">
            <option value="">All Services</option>
            <option ng-repeat="service in getUniqueServices()" value="{{service}}">{{service}}</option>
          </select>
          <select class="filter-select" ng-model="selectedSubService">
            <option value="">All Sub-Services</option>
            <option ng-repeat="subService in getUniqueSubServices()" value="{{subService}}">{{subService}}</option>
          </select>
          <button class="apply-btn" ng-click="clearFilters()" style="white-space: nowrap;">
            <i class="fas fa-times me-1"></i>Clear Filters
          </button>
        </div>
      </div>
    </div>

    <!-- Jobs Content -->
    <div class="jobs-container">
      <!-- Loading State -->
      <div ng-if="loading" class="loading-state">
        <div class="loading-spinner"></div>
        <h3 style="color: #404040; margin-bottom: 0.5rem; font-weight: 600;">Loading Opportunities</h3>
        <p style="color: #737373; margin: 0;">Finding the best service jobs for you...</p>
      </div>

      <!-- Jobs Header -->
      <div ng-if="!loading && jsonRecordsAry.length > 0" class="jobs-header">
        <div class="jobs-count">
          <i class="fas fa-briefcase me-2"></i>
          {{filteredJobs.length}} {{filteredJobs.length === 1 ? 'Opportunity' : 'Opportunities'}} Found
          <span ng-if="filteredJobs.length !== jsonRecordsAry.length" style="color: #737373; font-weight: 400;">
            (of {{jsonRecordsAry.length}} total)
          </span>
        </div>
        <div class="view-toggle">
          <button class="view-btn" ng-class="{active: viewMode === 'grid'}" ng-click="setViewMode('grid')">
            <i class="fas fa-th me-1"></i>Grid
          </button>
          <button class="view-btn" ng-class="{active: viewMode === 'list'}" ng-click="setViewMode('list')">
            <i class="fas fa-list me-1"></i>List
          </button>
        </div>
      </div>

      <!-- Empty State -->
      <div ng-if="!loading && filteredJobs.length === 0 && jsonRecordsAry.length === 0" class="empty-state">
        <div class="empty-state-icon">
          <i class="fas fa-briefcase"></i>
        </div>
        <h3 class="empty-state-title">No job opportunities available</h3>
        <p class="empty-state-text">
          There are currently no job postings. Please check back later for new opportunities.
        </p>
      </div>

      <!-- No Results State -->
      <div ng-if="!loading && filteredJobs.length === 0 && jsonRecordsAry.length > 0" class="empty-state">
        <div class="empty-state-icon">
          <i class="fas fa-search"></i>
        </div>
        <h3 class="empty-state-title">No opportunities match your search</h3>
        <p class="empty-state-text">
          Try adjusting your search criteria or clearing filters to see more results.
        </p>
        <button class="apply-btn" ng-click="clearFilters()" style="margin-top: 1rem;">
          <i class="fas fa-times me-1"></i>Clear All Filters
        </button>
      </div>

      <!-- Jobs Grid -->
      <div ng-if="!loading && filteredJobs.length > 0" class="jobs-grid">
        <div class="job-card" ng-repeat="obj in filteredJobs">
          <div class="job-card-header">
            <div class="job-title">
              <i class="{{getServiceIcon(obj.serviceCat)}} me-2"></i>
              {{obj.serviceCat || 'Service Opportunity'}}
            </div>
            <div class="job-subtitle">{{obj.subServiceCat || 'General Service'}}</div>
            <div class="job-badges">
              <span class="job-badge">{{obj.serviceCat}}</span>
              <span class="job-badge secondary" ng-if="obj.subServiceCat">{{obj.subServiceCat}}</span>
            </div>
          </div>

          <div class="job-card-body">
            <div class="job-detail">
              <i class="fas fa-map-marker-alt"></i>
              <span>{{obj.city}}, {{obj.state}}</span>
            </div>
            <div class="job-detail" ng-if="obj.address">
              <i class="fas fa-home"></i>
              <span>{{obj.address}}</span>
            </div>
            <div class="job-detail">
              <i class="fas fa-user"></i>
              <span>{{obj.emailid}}</span>
            </div>
            <div class="job-detail" ng-if="obj.UptoDate">
              <i class="fas fa-calendar"></i>
              <span>Available until {{formatDate(obj.UptoDate)}}</span>
            </div>

            <div class="job-task" ng-if="obj.task">
              <div class="job-task-label">Job Description</div>
              <div class="job-task-content">{{obj.task}}</div>
            </div>
          </div>

          <div class="job-card-footer">
            <div class="job-date">
              <i class="fas fa-clock me-1"></i>
              {{formatDate(obj.UptoDate)}}
            </div>
            <button class="apply-btn" ng-click="contactPoster(obj)">
              <i class="fas fa-envelope me-1"></i>
              Contact
            </button>
          </div>
        </div>
      </div>
    </div>

    <!-- Modern Footer -->
    <footer class="modern-footer">
      <div class="footer-content">
        <div class="footer-grid">
          <div class="footer-section">
            <h3><i class="fas fa-briefcase me-2"></i>Services</h3>
            <ul>
              <li><a href="#">Maid Services</a></li>
              <li><a href="#">Electrical Services</a></li>
              <li><a href="#">Gardening Services</a></li>
              <li><a href="#">Tutoring Services</a></li>
              <li><a href="#">Repair Services</a></li>
            </ul>
          </div>
          <div class="footer-section">
            <h3><i class="fas fa-info-circle me-2"></i>About KarmYog</h3>
            <p style="line-height: 1.6; color: var(--neutral-400);">
              Your Solution Hub! Connecting skilled professionals with customers for seamless projects. 
              We ensure local expertise, simplified experience, and trusted professionals.
            </p>
          </div>
          <div class="footer-section">
            <h3><i class="fas fa-envelope me-2"></i>Contact Us</h3>
            <ul>
              <li><a href="#"><i class="fas fa-map-marker-alt me-2"></i>Jalandhar, Punjab</a></li>
              <li><a href="mailto:ayushsingla5552@gmail.com"><i class="fas fa-envelope me-2"></i>ayushsingla5552@gmail.com</a></li>
              <li><a href="tel:+916284186961"><i class="fas fa-phone me-2"></i>+91 6284186961</a></li>
            </ul>
            <div class="social-links">
              <a href="#" class="social-link"><i class="fab fa-facebook-f"></i></a>
              <a href="#" class="social-link"><i class="fab fa-instagram"></i></a>
              <a href="#" class="social-link"><i class="fab fa-github"></i></a>
              <a href="#" class="social-link"><i class="fab fa-linkedin-in"></i></a>
            </div>
          </div>
        </div>
        <div class="footer-bottom">
          <p>&copy; 2024 KarmYog.com. All rights reserved. | Where projects find solutions!</p>
        </div>
      </div>
    </footer>
    
  </body>
</html>